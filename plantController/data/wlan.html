<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Garden</title>
</head>

<body>
  <h1>Welcome to Smart Garden</h1>
  <form class="wifi-form">
    <p>
      Please enter a new password for the access point to keep your system safe!
    </p>
    <p>
      <input id="ap-pass-field" type="text" placeholder="ESPPASSWORD">
    </p>

    <p>Please enter your Wifi Credentials to get started.</p>
    <input id="ssid-field" type="text" placeholder="SSID">
    <input id="password-field" type="password" placeholder="Password">
    <button type="submit">Submit</button>
  </form>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.js"></script>
  <script type="text/javascript">
    const ssidField = document.querySelector("#ssid-field");
    const passwordField = document.querySelector("#password-field");
    const apPasswordField = document.querySelector("#ap-pass-field");
    const wifiForm = document.querySelector(".wifi-form");

    wifiForm.onsubmit = function (e) {
      e.preventDefault();
      const ssid = ssidField.value;
      const password = passwordField.value;
      const apPassword = apPasswordField.value;
      const wifiForm = document.querySelector(".wifi-form");
      console.log(document.getElementById("ssid-field"));

      axios.get(`/change_wlan?ssid=${ssid}&pass=${password}&ap-pass=${apPassword}`)
        .then(response => {
          console.log(response);
        })
        .catch(() => {
          alert(
            "The WLAN could not be connected. Please try again."
          );
        });
    }
  </script>
</body>

</html>